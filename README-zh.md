# ImageKit

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)](https://github.com/hzbd/imagekit)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**ImageKit** æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”å¿«é€Ÿçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæ‰¹é‡å¤„ç†å›¾ç‰‡ã€‚å®ƒä½¿ç”¨ Rust ç¼–å†™ï¼Œé€šè¿‡å¹¶è¡Œå¤„ç†æ¥æœ€å¤§åŒ–æ€§èƒ½ï¼Œè®©ä½ èƒ½è½»æ¾åœ°å¯¹æ•´ä¸ªç›®å½•çš„å›¾ç‰‡è¿›è¡Œå°ºå¯¸è°ƒæ•´å’Œæ·»åŠ æ°´å°ã€‚

[English](./README.md)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **æ‰¹é‡å¤„ç†**: é€’å½’åœ°å¤„ç†æŒ‡å®šè¾“å…¥ç›®å½•ä¸‹çš„æ‰€æœ‰å›¾ç‰‡ (`jpg`, `png`, `gif`, `bmp`)ã€‚
- **æ™ºèƒ½ç¼©æ”¾**:
    - å¦‚æœåªæä¾›å®½åº¦ï¼Œåˆ™è‡ªåŠ¨æŒ‰æ¯”ä¾‹è®¡ç®—é«˜åº¦ã€‚
    - å¦‚æœåªæä¾›é«˜åº¦ï¼Œåˆ™è‡ªåŠ¨æŒ‰æ¯”ä¾‹è®¡ç®—å®½åº¦ã€‚
    - å¦‚æœåŒæ—¶æä¾›å®½é«˜ï¼Œåˆ™ç²¾ç¡®ç¼©æ”¾è‡³æŒ‡å®šå°ºå¯¸ï¼ˆå¯èƒ½ä¼šæ‹‰ä¼¸ï¼‰ã€‚
- **æ–‡æœ¬æ°´å°**: åœ¨å›¾ç‰‡çš„ä¹ä¸ªæ ‡å‡†ä½ç½®æ·»åŠ è‡ªå®šä¹‰æ–‡æœ¬æ°´å°ã€‚
- **å¯å®šåˆ¶æ°´å°**: è‡ªç”±è®¾ç½®æ°´å°çš„æ–‡å­—å†…å®¹ã€å­—ä½“å¤§å°å’Œä½ç½®ã€‚
- **âš¡ æé€Ÿæ€§èƒ½**: åˆ©ç”¨ [Rayon](https://github.com/rayon-rs/rayon) åº“å¹¶è¡Œå¤„ç†å›¾ç‰‡ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU çš„æ€§èƒ½ã€‚
- **è·¨å¹³å°**: å¯åœ¨ Windows, macOS, å’Œ Linux ä¸Šç¼–è¯‘å’Œè¿è¡Œã€‚
- **é›¶ä¾èµ–**: ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨åº“ï¼Œæ–¹ä¾¿åˆ†å‘ã€‚

## âš™ï¸ å®‰è£…ä¸æ„å»º

ä½ éœ€è¦å…ˆå®‰è£… [Rust å’Œ Cargo](https://www.rust-lang.org/tools/install)ã€‚

1.  **å…‹éš†ä»“åº“**
    ```bash
    git clone https://github.com/hzbd/imagekit.git
    cd imagekit
    ```

2.  **æ„å»ºé¡¹ç›®**
    ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œæˆ‘ä»¬æ„å»º release ç‰ˆæœ¬ã€‚
    ```bash
    cargo build --release
    ```

3.  **æ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶**
    æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä¼šä½äº `target/release/` ç›®å½•ä¸‹ã€‚
    -   åœ¨ Windows ä¸Šæ˜¯ `target/release/imagekit.exe`
    -   åœ¨ macOS / Linux ä¸Šæ˜¯ `target/release/imagekit`

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬è¯­æ³•

```bash
# åœ¨ Linux / macOS ä¸Š
./target/release/imagekit --input-dir <è¾“å…¥ç›®å½•> --output-dir <è¾“å‡ºç›®å½•> [é€‰é¡¹]

# åœ¨ Windows ä¸Š
.\target\release\imagekit.exe --input-dir <è¾“å…¥ç›®å½•> --output-dir <è¾“å‡ºç›®å½•> [é€‰é¡¹]
```

### ç¤ºä¾‹

å‡è®¾ä½ æœ‰ä¸€ä¸ªåä¸º `input_photos` çš„æ–‡ä»¶å¤¹ï¼Œæƒ³æŠŠå¤„ç†åçš„å›¾ç‰‡ä¿å­˜åˆ° `processed_photos`ã€‚

#### ç¤ºä¾‹ 1: å°†æ‰€æœ‰å›¾ç‰‡å®½åº¦ç¼©æ”¾åˆ° 800pxï¼Œé«˜åº¦æŒ‰æ¯”ä¾‹è‡ªåŠ¨è°ƒæ•´
è¿™æ˜¯æœ€å¸¸è§çš„ç¼©æ”¾åœºæ™¯ï¼Œå¯ä»¥ä¿è¯å›¾ç‰‡ä¸å˜å½¢ã€‚
```bash
./target/release/imagekit -i ./input_photos -o ./processed_photos --width 800
```

#### ç¤ºä¾‹ 2: å°†æ‰€æœ‰å›¾ç‰‡é«˜åº¦ç¼©æ”¾åˆ° 600pxï¼Œå®½åº¦æŒ‰æ¯”ä¾‹è‡ªåŠ¨è°ƒæ•´
```bash
./target/release/imagekit -i ./input_photos -o ./processed_photos --height 600
```

#### ç¤ºä¾‹ 3: åœ¨å³ä¸‹è§’æ·»åŠ ç‰ˆæƒæ°´å°ï¼ˆä¸æ”¹å˜å°ºå¯¸ï¼‰
```bash
./target/release/imagekit -i ./input_photos -o ./processed_photos --watermark-text "Â© 2024 My Photos"
```

#### ç¤ºä¾‹ 4: å¼ºåˆ¶ç¼©æ”¾åˆ° 1920x1080 å¹¶æ·»åŠ å±…ä¸­æ°´å°
å¦‚æœä½ éœ€è¦å›¾ç‰‡æœ‰ç²¾ç¡®çš„å°ºå¯¸ï¼Œå³ä½¿ä¼šæ‹‰ä¼¸å˜å½¢ã€‚
```bash
./target/release/imagekit \
    -i ./input_photos \
    -o ./processed_photos \
    --width 600 \
    --height 400 \
    --watermark-text "Vacation Memories" \
    --watermark-position center \
    --font-size 96
```

#### ç¤ºä¾‹ 5: æ·»åŠ ä¸€ä¸ªåŠé€æ˜çš„çº¢è‰²æ°´å°
```bash
./target/release/imagekit \
    -i ./input_photos \
    -o ./processed_photos \
    --watermark-text "DRAFT" \
    --watermark-color FF000080 \
    --font-size 128
```

## ğŸ“‹ å‘½ä»¤è¡Œé€‰é¡¹

| é€‰é¡¹                 | æ ‡å¿—                 | æè¿°                                                                    | å¿…éœ€/å¯é€‰ | é»˜è®¤å€¼   |
| -------------------- | -------------------- | ----------------------------------------------------------------------- | --------- | -------- |
| è¾“å…¥ç›®å½•             | `-i`, `--input-dir`  | åŒ…å«éœ€è¦å¤„ç†çš„å›¾ç‰‡çš„æºç›®å½•ã€‚                                            | **å¿…éœ€**  | -        |
| è¾“å‡ºç›®å½•             | `-o`, `--output-dir` | ç”¨äºå­˜æ”¾å¤„ç†åå›¾ç‰‡çš„ç›®å½•ã€‚                                              | **å¿…éœ€**  | -        |
| å®½åº¦                 | `--width`            | ï¼ˆå¯é€‰ï¼‰è°ƒæ•´å›¾ç‰‡çš„å®½åº¦ã€‚è‹¥ä¸æä¾›é«˜åº¦ï¼Œåˆ™æŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚                    | å¯é€‰      | åŸå§‹å®½åº¦ |
| é«˜åº¦                 | `--height`           | ï¼ˆå¯é€‰ï¼‰è°ƒæ•´å›¾ç‰‡çš„é«˜åº¦ã€‚è‹¥ä¸æä¾›å®½åº¦ï¼Œåˆ™æŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚                    | å¯é€‰      | åŸå§‹é«˜åº¦ |
| æ°´å°æ–‡å­—             | `--watermark-text`   | ï¼ˆå¯é€‰ï¼‰è¦æ·»åŠ çš„æ°´å°æ–‡å­—å†…å®¹ã€‚                                          | å¯é€‰      | -        |
| æ°´å°ä½ç½®             | `--watermark-position` | ï¼ˆå¯é€‰ï¼‰æ°´å°åœ¨å›¾ç‰‡ä¸Šçš„ä½ç½®ã€‚                                            | å¯é€‰      | `se`     |
| å­—ä½“å¤§å°             | `--font-size`        | ï¼ˆå¯é€‰ï¼‰æ°´å°æ–‡å­—çš„å¤§å°ï¼ˆå•ä½ï¼šåƒç´ ï¼‰ã€‚                                  | å¯é€‰      | `24`     |
| æ°´å°é¢œè‰²             | `--watermark-color`  | ï¼ˆå¯é€‰ï¼‰æ°´å°é¢œè‰²ï¼Œæ ¼å¼ä¸º RRGGBB æˆ– RRGGBBAAã€‚                           | å¯é€‰      | `FFFFFF80` (åŠé€æ˜ç™½) |
#### `watermark-position` çš„å¯ç”¨å€¼:

-   `nw`: å·¦ä¸Š (North-West)
-   `north`: ä¸­ä¸Š
-   `ne`: å³ä¸Š (North-East)
-   `west`: ä¸­å·¦
-   `center`: å±…ä¸­
-   `east`: ä¸­å³
-   `sw`: å·¦ä¸‹ (South-West)
-   `south`: ä¸­ä¸‹
-   `se`: å³ä¸‹ (South-East)

## ğŸ› ï¸ å¼€å‘ä¸æµ‹è¯•

å¦‚æœä½ æƒ³ä¸ºæ­¤é¡¹ç›®è´¡çŒ®ä»£ç ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1.  å…‹éš†ä»“åº“ã€‚
2.  åšå‡ºä½ çš„ä¿®æ”¹ã€‚
3.  è¿è¡Œæµ‹è¯•ä»¥ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ï¼š
    ```bash
    cargo test
    ```

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚